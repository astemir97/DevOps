#!groovy
properties([disableConcurrentBuilds()])

    pipeline {
        agent {
            label 'master'
        }
        triggers { pollSCM('* * * * *') }
        options {
            buildDiscarder(logRotator(numToKeepStr: '10', artifactNumToKeepStr: '10'))
            timestamps()
        }
        stages {
            stage("First step") {
                steps {
                    echo "===================== Stat the Node ========================="
                    sh 'ssh root@192.168.1.4 \'cat /etc/lsb-release\''
                }          
            }
            stage("Build Docker Container") {
                steps {
                    echo "===================== Start Build Docker ===================="
                    dir ('docker/tools') {
                        sh 'docker build -t tools:latest .'
                    }
                }
            } 
        } 
        
    }
